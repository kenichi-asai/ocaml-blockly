<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <!-- typed.js loads other JS scripts for blockly dynamically.
      Those files are different depending on whether the DEVMODE is
      enabled. You can change the DEVMODE in typed.js. -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
  <script type="text/javascript" src="typed.js"></script>
</head>
<body>
  <div id="workspaceArea">
    <div id="blocklyDiv"></div>
  </div>
  <div id="rightArea">
    <div class="content">
      <div class="codeToBlock">
        <h2 class="contentTitle">OCaml => block</h2>
        <div class="box">
          <input id="upload-file" type="file" accept=".ml" /><br>
          <button class="btn" onclick="Typed.loadCode()">Upload</button>
        </div>
        <form onsubmit="Typed.onClickConvert(event)">
	  <!-- 以下の checkbox は常に必要。使う場合は type="checkbox"、
	       消す場合は type="hidden" とした上で ekimei_t 等をコメン
	       トアウトする -->
          <input class="checkbox1" type="hidden"><!--ekimei_t--></input>
          <input class="checkbox2" type="hidden"><!--ekikan_t--></input>
          <input class="checkbox3" type="hidden"><!--eki_t--></input>
	  <!-- 全部 hidden なら以下の <br> は不要 -->
	  <!-- ひとつでも hidden でなくなったら、以下の <br> を使う -->
          <!--
          <br>
	  -->
          <textarea class="ocamlCode" type="text" rows="10" cols="35">
	  </textarea>
          <input class="btn" type="submit" value="Convert to block"></input>
        </form>
      </div>
      <div class="blockToCode">
        <h2 class="contentTitle">block => OCaml</h2>
        <p>
          <textarea class="generatedCode" type="text" rows="10" cols="35"
		    wrap="off" readonly></textarea>
          <button class="btn" onclick="Typed.showCode()">Update</button>
        </p>
        <div class="box">
          <span>File name:
		<input type="text" id="filename" size="16" value="report">.ml
	  </span><br>
          <button class="btn" id="download"
		  onclick="Typed.saveCode()">Download</button>
        </div>
	<!--
        <button id="switchButton" class="btn --square"
		onclick="Typed.switchArea()">&lt;&lt;</button>
	-->
	<button class="btnS" onclick="Typed.newToplevel()">Run</button>
	<br>
	<button class="btnS" onclick="Typed.newStepWindow()">Step</button>
	<input type="checkbox" id="listCheckbox"/>
	<label for="listCheckbox">List モジュール使用</label>

	<!--
        <button class="btnS" onclick="Typed.clearToplevel()">
		Clear result
	</button><br>
	-->
      </div>
      <pre><div id="toplevel"></div></pre>
      <canvas id="CanvasForUniverse"></canvas>
    </div>
  </div>
  <div class="clear"></div>

  <xml id="toolbox" style="display: none">
    <category name="四則演算" colour="%{BKY_INT_HUE}">
      <block type="int_typed"></block>
      <block type="int_arithmetic_typed"></block>
      <block type="max_int_typed"></block>
      <block type="int_abs_typed"></block>
      <block type="int_of_float_typed"></block>
      <block type="random_int_typed"></block>
      <block type="float_typed"></block>
      <block type="float_arithmetic_typed"></block>
      <block type="infinity_typed"></block>
      <block type="float_sqrt_typed"></block>
      <block type="float_of_int_typed"></block>
      <block type="random_float_typed"></block>
    </category>
    <category name="文字列" colour="%{BKY_STRING_HUE}">
      <block type="string_typed"></block>
      <block type="concat_string_typed"></block>
      <block type="string_of_int_typed"></block>
      <block type="string_of_float_typed"></block>
      <block type="string_of_bool_typed"></block>
    </category>
    <category name="論理演算と条件文" colour="%{BKY_LOGIC_HUE}">
      <block type="logic_boolean_typed"></block>
      <block type="not_operator_typed"></block>
      <block type="logic_compare_typed"></block>
      <block type="logic_operator_typed"></block>
      <block type="logic_ternary_typed"></block>
    </category>
    <category name="変数と match 文" colour="%{BKY_VARIABLES_HUE}">
      <block type="letstatement_fun_pattern_typed">
        <mutation items=0></mutation>
      </block>
      <block type="letstatement_fun_pattern_typed">
        <mutation items=1></mutation>
      </block>
      <block type="match_typed"></block>
    </category>
    <category name="組とレコード定義" colour="%{BKY_PAIRS_HUE}">
      <block type="pair_create_typed"></block>
      <block type="defined_recordtype_typed"></block>
    </category>
    <category name="リスト" colour="%{BKY_LISTS_HUE}">
      <block type="list_empty_typed"></block>
      <block type="list_cons_typed"></block>
      <block type="lists_create_with_typed"></block>
      <block type="list_map_typed"></block>
      <block type="list_map2_typed"></block>
      <block type="list_filter_typed"></block>
      <block type="list_fold_right_typed"></block>
      <block type="list_fold_left_typed"></block>
      <block type="list_fold_right2_typed"></block>
      <block type="list_fold_left2_typed"></block>
      <block type="list_assoc_typed"></block>
      <block type="list_partition_typed"></block>
    </category>
    <category name="進んだ構文" colour="%{BKY_HIGHER_ORDER_HUE}">
      <block type="lambda_typed"></block>
      <block type="lambda_app_typed"></block>
      <block type="pair_first_typed"></block>
      <block type="pair_second_typed"></block>
      <block type="defined_datatype_typed"></block>
      <block type="option_none_typed"></block>
      <block type="option_some_typed"></block>
    </category>
  </xml>
</body>
</html>
